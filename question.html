<!-- <!DOCTYPE html> -->
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>question title</title>
        <link rel="stylesheet" href="css/style.css">
    </head>
    <script>
        var data = localStorage.getItem("data");
        data = JSON.parse(data);
        var sc = 0;
        // var question;
        
        function correct(num)
        {
            sc += 5;
            const result = document.getElementById("result-" + num.toString());
            result.innerHTML = "第" + num + "題: correct";
            result.className = "correct";

        }
        function wrong(num)
        {
            const result = document.getElementById("result-" + num.toString());
            result.innerHTML = "第" + num + "題: wrong";
            result.className = "wrong";
        }
        function checkAnswer()
        {
            
            for(var i = 0; i < data.length; i ++)
            {
                if (i === 13)
                {
                    this.correct(i);
                    continue;
                }
                var question = data[i];
                if (question.answers.type === "MCQ")
                {
                    var correct = question.correct;
                    var correctOption = document.getElementById(correct.toString());
                    if (correctOption.checked)
                    {
                        this.correct(i);
                    }
                    else
                    {
                        this.wrong(i);
                    }
                }
                else if (question.answers.type === "cloze")
                {
                    var correct = question.correct;
                    const answer = document.getElementById("text-option" + question.answers.options);
                    if (correct === answer.value)
                    {
                        correct(i);
                    }
                    else
                    {
                        wrong(i);
                    }
                }
            }
            // document.getElementById("check").disabled = true;
            document.getElementById("changeAnswer").disabled = false;
            document.getElementById("home").disabled = false;

        }
        function onePageHTML()
        {
            for(const question of data)
            {
                document.writeln("<div class=\"question\">");
                document.writeln("<h2 class=\"head\">" + question.title + "</h2>");
                document.writeln("<p class=\"description\">" + question.description + "</p>");
                if (question.image !== null)
                {
                    document.writeln("<img src=\"" + question.image + "\" class=\"question_image\" height=\"" + question.height + "\"><br>");
                }
                if (question.answers.type === "MCQ")
                {
                    document.writeln("<div class=\"choices\">");
                    for(const option of question.answers.options)
                    {
                        document.writeln("<div class=\"option\">");
                        if (option.image !== null)
                        {
                            document.writeln("<img src=\"" + option.image + "\" class=\"option img\"><br>");
                        }
                        document.writeln("<div class=\"text\">");
                        document.writeln("<input type=\"radio\" name=\"option\" value=\"" + option.name + "\" id=\"" + option.name + "\" class=\"radio\"><a >" + option.content + "</a>");
                        document.writeln("</div>");
                        document.writeln("</div>");
                    }
                    document.writeln("</div>");
                }
                else if (question.answers.type === "cloze")
                {
                    document.writeln("<div>");
                    document.writeln("<input type=\"text\" class=\"text_input\" + id=\"text-option" + question.answers.options + "\">");
                    document.writeln("</div>");
                }
                document.writeln("</div>");
                document.writeln("<hr>");
            }
        }
        function clearResult()
        {
            document.getElementById("checkAnswer").disabled = false;
            for(var i = 0; i < data.length; i++)
            {
                document.getElementById("result-" + i.toString()).innerHTML = "";
            }
        }
    </script>
    <body>
        <div>
            <button onclick="window.location.href='data.html'">reload</button>
            <script>
                
                onePageHTML();
            </script>
            <h1>確認好答案了嗎?</h1>
            <button onclick="checkAnswer();this.disabled = true;" class="checkAnswer" id="checkAnswer">對的</button>
            <script>
                for(var i = 0; i < data.length; i++)
                {
                    document.writeln("<p id=\"result-" + i.toString() + "\"></p>");
                }
            </script>
            <button class="checkAnswer" id="changeAnswer" onclick="clearResult();" disabled>讓我改一下答案</button>
            <button class="checkAnswer" id="home" onclick="window.location.href='home.html'" disabled>home</button>
            
        </div>

        

    </body>
</html>

    